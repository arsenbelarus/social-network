{"version":3,"sources":["Components/Profile/MyPosts/MyPosts.module.css","Components/Header/Header.module.css","HOC/withAuthRedirect.tsx","Redux/messageReducer.ts","Assets/Images/loader.gif","Components/Profile/MyPosts/Post/Post.module.css","Components/Navbar/Navbar.module.css","Components/Profile/ProfileInfo/ProfileInfo.module.css","Components/Common/FormControls/FormControls.tsx","Utils/Validation/validators.ts","serviceWorker.ts","Components/Navbar/Navbar.tsx","Components/Music/Music.tsx","Components/News/News.tsx","Components/Settings/Settings.tsx","API/api.ts","Redux/usersReducer.ts","Components/Common/Paginator/Paginator.tsx","Components/Users/Users.tsx","Components/Common/Preloader/Preloader.tsx","Redux/user-selector.ts","Components/Users/UsersContainer.tsx","Components/Profile/ProfileInfo/ProfileStatusWtihHooks.tsx","Components/Profile/ProfileInfo/ProfileData.tsx","Components/Profile/ProfileInfo/ProfileDataForm.tsx","Components/Profile/ProfileInfo/ProfileInfo.tsx","Redux/profileReducer.ts","Components/Profile/MyPosts/Post/Post.tsx","Components/Profile/MyPosts/AddPostForm.tsx","Components/Profile/MyPosts/MyPosts.tsx","Components/Profile/MyPosts/MyPostsContainer.tsx","Components/Profile/Profile.tsx","Components/Profile/ProfileContainer.tsx","Components/Header/Header.tsx","Redux/friendsReducer.ts","Redux/authReducer.ts","Components/Header/HeaderContainer.tsx","Components/Login/LoginForm.tsx","Components/Login/Login.tsx","Redux/appReducer.ts","Components/Friends/Friends.tsx","Components/Friends/FriendsContainer.tsx","App.tsx","Redux/reduxStore.ts","index.tsx","Components/Common/FormControls/FormControls.module.css","Assets/Images/avatar.jpg","Components/Users/Users.module.css","Components/Friends/Friends.module.css","Components/Common/Paginator/Paginator.module.css"],"names":["module","exports","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","addMessageActionCreator","newMessageBody","type","initialState","dialogsData","id","name","messagesDataLeft","message","messagesDataRight","newMessageText","messageReducer","action","newMessage","Textarea","input","meta","hasError","touched","error","className","s","formControl","Input","requiredField","value","maxLength","length","Boolean","window","location","hostname","match","Navbar","nav","item","activeClassName","activeLink","Music","News","Settings","axiosInstance","axios","create","withCredentials","baseURL","headers","userApi","currentPage","pageSize","get","then","response","data","userId","post","delete","console","log","profileApi","getProfile","friends","getStatus","updateStatus","status","put","updateProfileData","profile","savePhoto","photo","formData","FormData","append","loginApi","securityApi","users","totalUsersCount","isFetching","isFollowStatusChanging","setUsers","toggleIsFetching","toggleFollowStatusChanging","usersReducer","map","u","followed","totalUsersQuantity","filter","Paginator","pagesNumber","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","pagination","onClick","p","index","key","selectedPage","style","cursor","onPaginationClickHandler","Users","userContainer","imageAndButtonContainer","src","photos","small","avatarLogo","usersPhoto","button","disabled","some","unFollow","follow","userInformation","Preloader","width","margin","loader","height","getUsersSelector","createSelector","usersPage","getPageSizeSelector","getTotalUsersCountSelector","getCurrentPageSelector","getIsFetchingSelector","getIsFollowStatusChangingSelector","UsersContainer","pageNumber","getUsers","toggleIsFollowStatusChanging","compose","dispatch","resultCode","followSuccess","setCurrentPage","items","totalCount","unFollowSuccess","ProfileStatusWithHooks","editMode","setEditMode","setStatus","useEffect","description","onDoubleClick","isOwner","TextField","variant","onChange","e","currentTarget","onBlur","update","autoFocus","ProfileData","activateEditMode","fullName","aboutMe","lookingForAJob","lookingForAJobDescription","Object","keys","contacts","ProfileDataReduxForm","reduxForm","form","onSubmit","handleSubmit","formSummaryError","Field","component","placeholder","validate","ProfileInfo","large","alt","target","files","initialValues","postsData","likesCount","setUserStatus","setUpdatedProfileData","profileReducer","newPost","addNewPost","Post","maxLength10","AddPostReduxForm","MyPosts","memo","postElements","posts","main","values","addPost","MyPostsContainer","profilePage","addPostActionCreator","Profile","ProfileContainer","params","authorisedId","history","getUserProfile","getUserStatus","goToProfile","prevProps","prevState","content","updateUserStatus","withRouter","file","a","messages","toLowerCase","stopSubmit","Promise","reject","Header","header","loginBlock","login","logout","setFriends","getFriends","friendsReducer","email","captchaUrl","setUserData","payload","getCaptchaUrlSuccess","checkAuth","getCaptcha","url","authReducer","HeaderContainer","maxLength50","LoginReduxForm","display","password","rememberMe","captcha","formErrorMessage","_error","initialised","appReducer","Friends","friendsElements","f","friend","friendName","FriendsContainer","friendsPage","DialogsContainer","lazy","App","initialiseApp","path","render","Suspense","fallback","gridArea","backgroundColor","app","checkAuthResult","all","reducers","combineReducers","messagesPage","formReducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.8a09d48e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"MyPosts_main__PN3Os\",\"posts\":\"MyPosts_posts__1PK4X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__l2oe9\",\"loginBlock\":\"Header_loginBlock__Zic5-\"};","import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {_stateType} from \"../Redux/Types\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToPropsForRedirect = (state: _stateType) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport const withAuthRedirect = (Component: any) => {\r\n    class RedirectComponent extends React.Component<any, any> {\r\n        render() {\r\n            if(!this.props.isAuth) {return <Redirect to={\"/login\"}/>};\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}","import {messagesPageType} from \"./Types\";\r\n\r\nconst addMessage = \"ADD-MESSAGE\";\r\n\r\nexport const addMessageActionCreator = (newMessageBody: string) => {return {type: addMessage, newMessageBody}}\r\n\r\nlet initialState = {\r\n    dialogsData: [\r\n        {id: 1, name: \"Arsen\"},\r\n        {id: 2, name: \"Olya\"},\r\n        {id: 3, name: \"Tigran\"},\r\n        {id: 4, name: \"David\"},\r\n    ],\r\n    messagesDataLeft: [\r\n        {id: 1, message: \"Hi\"},\r\n        {id: 2, message: \"How are you\"},\r\n        {id: 3, message: \"Hello world\"},\r\n        {id: 4, message: \"Lorem ipsum\"},\r\n    ],\r\n    messagesDataRight: [\r\n        {id: 1, message: \"I love my wife\"},\r\n        {id: 2, message: \"fg gfdgsdfg g fd\"},\r\n        {id: 3, message: \"fg dfgdf dfg \"},\r\n        {id: 4, message: \" fd sgdf dfg df \"},\r\n    ],\r\n    newMessageText: \"\",\r\n}\r\n\r\nconst messageReducer = (state: messagesPageType = initialState, action: any) => {\r\n    switch (action.type) {\r\n        case addMessage:\r\n            let newMessage = {id: 5, message: action.newMessageBody,}\r\n            return {\r\n                ...state,\r\n                messagesDataLeft: [...state.messagesDataLeft, newMessage],\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default messageReducer;\r\n","module.exports = __webpack_public_path__ + \"static/media/loader.181849d9.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3YEHT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__7zjwi\",\"item\":\"Navbar_item__2dKJe\",\"activeLink\":\"Navbar_activeLink__3dRIm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"ProfileInfo_description__1tfyt\",\"formSummaryError\":\"ProfileInfo_formSummaryError__1aAT3\"};","import React from \"react\";\r\nimport s from \"./FormControls.module.css\"\r\n\r\ntype propsType = {}\r\n\r\n// @ts-ignore\r\nexport const Textarea = ({input, meta, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\r\n            <div>\r\n                <textarea {...input} {...props} />\r\n            </div>\r\n            {hasError &&  <span>{meta.error}</span> }\r\n        </div>\r\n    )\r\n}\r\n\r\n// @ts-ignore\r\nexport const Input = ({input, meta, ...props}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\r\n            <div>\r\n                <input {...input} {...props} />\r\n            </div>\r\n            {hasError &&  <span>{meta.error}</span> }\r\n        </div>\r\n    )\r\n}","export const requiredField = (value: string) => {\r\n    if(value) return undefined;\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLength = (maxLength: number) => (value: string) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n    return undefined;\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype propsType = {\r\n\r\n}\r\nfunction Navbar(props: propsType) {\r\n    return (\r\n        <div className={s.nav}>\r\n            <nav>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/profile\"} activeClassName={s.activeLink}> Profile </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/dialogs\"} activeClassName={s.activeLink}> Messages</NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/users\"} activeClassName={s.activeLink}> Users</NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/news\"} activeClassName={s.activeLink}> News</NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/music\"} activeClassName={s.activeLink}> Music</NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to={\"/settings\"} activeClassName={s.activeLink}> Settings</NavLink>\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navbar","import React from 'react';\r\nimport s from './Music.module.css';\r\n\r\n\r\nfunction Music() {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Music;","import React from 'react';\r\nimport s from './News.module.css';\r\n\r\n\r\nfunction News() {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News","import React from 'react';\r\nimport s from './Settings.module.css';\r\n\r\n\r\nfunction Settings() {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings","import axios from \"axios\";\r\nimport {profileType} from \"../Redux/Types\";\r\n\r\nconst axiosInstance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    headers: {\r\n        \"API-KEY\": \"a318ecb3-f5df-4512-99ed-aabe354d9b6f\"\r\n    },\r\n})\r\n\r\nexport const userApi = {\r\n    getUsers (currentPage: number = 1, pageSize: number = 100) {\r\n        return axiosInstance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    checkAuth () {\r\n        return axiosInstance.get('auth/me')\r\n            .then(response => response.data)\r\n    },\r\n    follow (userId: number) {\r\n        return axiosInstance.post(`follow/${userId}`, {})\r\n            .then(response => response.data)\r\n    },\r\n    unFollow (userId: number) {\r\n        return axiosInstance.delete(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getProfile (userId: number) {\r\n        console.log(\"Obsolete method. Please use profileApi\")\r\n        return profileApi.getProfile(userId)\r\n    },\r\n    getFriends (friends: boolean, pageSize: number = 100) {\r\n        return axiosInstance.get(`users?friend=${friends}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const profileApi = {\r\n    getProfile (userId: number) {\r\n        return axiosInstance.get(`profile/${userId}`)\r\n    },\r\n    getStatus (userId: number) {\r\n        return axiosInstance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus (status: string) {\r\n        return axiosInstance.put(\"profile/status\", {status: status})\r\n    },\r\n    updateProfileData (profile: profileType) {\r\n        return axiosInstance.put(\"profile\", profile)\r\n    },\r\n    savePhoto (photo: File) {\r\n        const formData = new FormData()\r\n        formData.append(\"image\", photo)\r\n        return axiosInstance.put(\"profile/photo\", formData, {\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\"\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport const loginApi = {\r\n    signIn(data: { password: string | number; captcha: string | null; rememberMe: boolean; email: string }) {\r\n        return axiosInstance.post(\"auth/login\", data)\r\n    },\r\n    signOut () {\r\n        return axiosInstance.delete(\"auth/login\")\r\n    }\r\n}\r\n\r\nexport const securityApi = {\r\n    getCaptchaUrl () {\r\n        return axiosInstance.get(\"security/get-captcha-url\")\r\n    }\r\n}\r\n\r\n\r\n","import {usersPageType, usersType} from \"./Types\";\r\nimport {userApi} from \"../API/api\";\r\n\r\nconst FOLLOW = \"FOLLOW\";\r\nconst UNFOLLOW = \"UNFOLLOW\";\r\nconst SET_USERS = \"SET_USERS\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_USERS_QUANTITY = \"SET_TOTAL_USERS_QUANTITY\";\r\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\r\nconst TOGGLE_FOLLOW_STATUS_CHANGING = \"TOGGLE_FOLLOW_STATUS_CHANGING\";\r\n\r\nlet initialState: usersPageType = {\r\n    users: [],\r\n    pageSize: 100,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    isFollowStatusChanging: [],\r\n}\r\n\r\n\r\nconst usersReducer = (state: usersPageType = initialState, action: any) => {\r\n\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n            }\r\n\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage,\r\n            }\r\n\r\n        case SET_TOTAL_USERS_QUANTITY:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalUsersQuantity,\r\n            }\r\n\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching,\r\n            }\r\n        case TOGGLE_FOLLOW_STATUS_CHANGING:\r\n            return {\r\n                ...state,\r\n                isFollowStatusChanging: action.isFollowStatusChanging\r\n                    ? [...state.isFollowStatusChanging, action.userId]\r\n                    : state.isFollowStatusChanging.filter(id => id !== action.userId),\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n// Action creators\r\nexport const followSuccess = (userId: number) => ({type: FOLLOW, userId});\r\nexport const unFollowSuccess = (userId: number) => ({type: UNFOLLOW, userId});\r\nexport const setUsers = (users: usersType[]) => ({type: SET_USERS, users});\r\nexport const setCurrentPage = (currentPage: number) => ({type: SET_CURRENT_PAGE, currentPage});\r\nexport const setTotalUsersQuantity = (totalUsersQuantity: number) => ({\r\n    type: SET_TOTAL_USERS_QUANTITY,\r\n    totalUsersQuantity\r\n});\r\nexport const toggleIsFetching = (isFetching: boolean) => ({type: TOGGLE_IS_FETCHING, isFetching});\r\nexport const toggleFollowStatusChanging = (isFollowStatusChanging: boolean, userId: number) =>\r\n    ({type: TOGGLE_FOLLOW_STATUS_CHANGING, isFollowStatusChanging, userId});\r\n\r\n\r\n// Thunk creators\r\nexport const getUsers = (currentPage: number, pageSize: number) => {\r\n    return (dispatch: any) => {\r\n        dispatch(toggleIsFetching(true));\r\n        dispatch(setUsers([]));\r\n        dispatch(setCurrentPage(currentPage));\r\n        userApi.getUsers(currentPage, pageSize).then(data => {\r\n            dispatch(toggleIsFetching(false));\r\n            dispatch(setUsers(data.items));\r\n            dispatch(setTotalUsersQuantity(data.totalCount));\r\n        });\r\n    }\r\n}\r\nexport const unFollow = (userId: number) => {\r\n    return (dispatch: any) => {\r\n        dispatch (toggleFollowStatusChanging(true, userId))\r\n        userApi.unFollow(userId).then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch (unFollowSuccess(userId))\r\n            }\r\n            dispatch (toggleFollowStatusChanging(false, userId))\r\n        });\r\n    }\r\n}\r\nexport const follow = (userId: number) => {\r\n    return (dispatch: any) => {\r\n        dispatch (toggleFollowStatusChanging(true, userId))\r\n        userApi.follow(userId).then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch (followSuccess(userId))\r\n            }\r\n            dispatch (toggleFollowStatusChanging(false, userId))\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer;","import React, {useState} from \"react\";\r\nimport s from \"./Paginator.module.css\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\n\r\ntype paginatorPropsType = {\r\n    totalUsersCount: number,\r\n    pageSize: number,\r\n    currentPage: number,\r\n    onPaginationClickHandler: (p: number) => void,\r\n}\r\n\r\nconst Paginator = (props: paginatorPropsType) => {\r\n    let pagesNumber = Math.ceil(props.totalUsersCount / props.pageSize)\r\n\r\n    let pages = []\r\n    for (let i = 1; i <= pagesNumber; i++) {\r\n        pages.push(i)\r\n    }\r\n    let portionSize = 10;\r\n    let portionCount = Math.ceil(pagesNumber/portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n\r\n    return (\r\n            <div className={s.pagination}>\r\n                {portionNumber > 1 &&\r\n                <button onClick={() => {setPortionNumber(portionNumber - 1)}}> Previous </button>}\r\n\r\n                {pages\r\n                    .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                    .map((p, index) =>\r\n                    <span key={index} className={(props.currentPage === p) ? s.selectedPage : \"\"}\r\n                          style={{cursor: \"pointer\"}}\r\n                          onClick={() => {\r\n                              props.onPaginationClickHandler(p)\r\n                          }}> {p} </span>\r\n                )}\r\n                {portionCount > portionNumber &&\r\n                <button onClick={() => {setPortionNumber(portionNumber + 1)}}> Next </button>}\r\n            </div>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default Paginator","import React from \"react\"\r\nimport s from \"./Users.module.css\"\r\nimport {usersType} from \"../../Redux/Types\";\r\nimport avatarLogo from \"../../Assets/Images/avatar.jpg\"\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Paginator from \"../Common/Paginator/Paginator\";\r\n\r\ntype UsersPropsType = {\r\n    totalUsersCount: number;\r\n    pageSize: number;\r\n    currentPage: number;\r\n    users: Array<usersType>;\r\n    unFollow: (id: number) => void;\r\n    follow: (id: number) => void;\r\n    onPaginationClickHandler: (p: number) => void;\r\n    isFollowStatusChanging: Array<number>;\r\n    toggleIsFollowStatusChanging: (isFollowStatusChanging: boolean, userId: number) => void\r\n}\r\n\r\nconst Users = (props: UsersPropsType) => {\r\n\r\n    return (\r\n        <div>\r\n            <Paginator totalUsersCount={props.totalUsersCount} pageSize={props.pageSize}\r\n                       currentPage={props.currentPage} onPaginationClickHandler={props.onPaginationClickHandler}/>\r\n            {\r\n                props.users.map((u: usersType) =>\r\n                    <div key={u.id} className={s.userContainer}>\r\n                        <div className={s.imageAndButtonContainer}>\r\n                            <div>\r\n                                <NavLink to={\"/profile/\" + u.id}>\r\n                                    <img src={u.photos.small ? u.photos.small : avatarLogo} className={s.usersPhoto}/>\r\n                                </NavLink>\r\n                            </div>\r\n                            <div className={s.button}>\r\n                                {u.followed\r\n                                    ? <button disabled={props.isFollowStatusChanging.some(id => id === u.id)} onClick={() => props.unFollow(u.id)}>UnFollow</button>\r\n                                    : <button disabled={props.isFollowStatusChanging.some(id => id === u.id)} onClick={() => props.follow(u.id)}>Follow</button>}\r\n                            </div>\r\n                        </div>\r\n                        <span className={s.userInformation}>\r\n                            <span>\r\n                                <div>{u.name}</div>\r\n                                <div>{u.status}</div>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users","import React from \"react\";\r\nimport loader from \"../../../Assets/Images/loader.gif\";\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div style={{width: \"100px\", margin: \"0 auto\"}}>\r\n            <img src={loader} style={{width: \"100px\", height: \"60px\"}}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader","import {_stateType} from \"./Types\";\r\nimport {createSelector} from \"reselect\";\r\n\r\nconst getUsersPrimitiveSelector = (state: _stateType) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsersSelector = createSelector(getUsersPrimitiveSelector, (users) => {return users.filter(u => true)})\r\n\r\n\r\nexport const getPageSizeSelector = (state: _stateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCountSelector = (state: _stateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPageSelector = (state: _stateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetchingSelector = (state: _stateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getIsFollowStatusChangingSelector = (state: _stateType) => {\r\n    return state.usersPage.isFollowStatusChanging\r\n}","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {_stateType} from \"../../Redux/Types\";\r\nimport {\r\n    follow,\r\n    getUsers,\r\n    toggleFollowStatusChanging,\r\n    unFollow,\r\n} from \"../../Redux/usersReducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../Common/Preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPageSelector, getIsFetchingSelector, getIsFollowStatusChangingSelector,\r\n    getPageSizeSelector,\r\n    getTotalUsersCountSelector,\r\n    getUsersSelector\r\n} from \"../../Redux/user-selector\";\r\n\r\n\r\nclass UsersContainer extends React.Component<any> {\r\n\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n    onPaginationClickHandler = (pageNumber: number) => {\r\n        this.props.getUsers(pageNumber, this.props.pageSize)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <>\r\n            {this.props.isFetching ? <Preloader /> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                   pageSize={this.props.pageSize}\r\n                   currentPage={this.props.currentPage}\r\n                   follow={this.props.follow}\r\n                   unFollow={this.props.unFollow}\r\n                   isFollowStatusChanging = {this.props.isFollowStatusChanging}\r\n                   toggleIsFollowStatusChanging = {this.props.toggleIsFollowStatusChanging}\r\n                   onPaginationClickHandler={this.onPaginationClickHandler}\r\n                   users={this.props.users}/>\r\n        </>\r\n\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: _stateType) => {\r\n    return {\r\n        users: getUsersSelector(state),\r\n        pageSize: getPageSizeSelector(state),\r\n        totalUsersCount: getTotalUsersCountSelector(state),\r\n        currentPage: getCurrentPageSelector(state),\r\n        isFetching: getIsFetchingSelector(state),\r\n        isFollowStatusChanging: getIsFollowStatusChangingSelector(state),\r\n    }\r\n}\r\n\r\n\r\nexport default compose(\r\n    connect (mapStateToProps, {follow,\r\n        toggleFollowStatusChanging, getUsers, unFollow})\r\n)(UsersContainer)\r\n","import React, {ChangeEvent, useEffect, useState} from \"react\";\r\nimport {profileType} from \"../../../Redux/Types\";\r\nimport s from './ProfileInfo.module.css';\r\nimport {TextField} from \"@material-ui/core\";\r\n\r\ntype propsType = {\r\n    profile: profileType,\r\n    status: string,\r\n    update: (status: string) => void,\r\n    isOwner: boolean\r\n}\r\n\r\nconst ProfileStatusWithHooks = (props: propsType) => {\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(()=>{\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        if(props.isOwner) {\r\n            setEditMode(true)\r\n        }\r\n    }\r\n    const activateViewMode = () => {\r\n        setEditMode(false)\r\n        props.update(status)\r\n    }\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => setStatus(e.currentTarget.value)\r\n\r\n    return (\r\n        <>\r\n            {!editMode &&\r\n            <div className={s.description}>\r\n                <span onDoubleClick={activateEditMode}><strong>Status: </strong>{props.status}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div className={s.description}>\r\n                <TextField variant={\"outlined\"} type=\"text\" value={status}\r\n                           onChange={onStatusChange} onBlur={activateViewMode} autoFocus={true} />\r\n            </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfileStatusWithHooks","import React from \"react\";\r\nimport s from \"./ProfileInfo.module.css\";\r\nimport {profileType} from \"../../../Redux/Types\";\r\n\r\ntype ProfileDataTypes = {\r\n    profile: profileType\r\n    isOwner: boolean\r\n    activateEditMode: () => void\r\n}\r\n\r\nconst ProfileData = (props: ProfileDataTypes) => {\r\n    return (\r\n        <div>\r\n\r\n            {\r\n                props.isOwner &&\r\n                <div>\r\n                    <button onClick={props.activateEditMode}> <strong> Edit Profile </strong> </button>\r\n                </div>\r\n            }\r\n\r\n            <div className={s.description}>\r\n                <strong> Full name: </strong> {props.profile.fullName}\r\n            </div>\r\n            <div className={s.description}>\r\n                <strong> About me: </strong> {props.profile.aboutMe}\r\n            </div>\r\n            <div className={s.description}>\r\n                <strong> Looking for a job: </strong> {props.profile.lookingForAJob ? \"yes\" : \"no\"}\r\n            </div>\r\n            {props.profile.lookingForAJob &&\r\n            <div className={s.description}>\r\n                <strong> Professional background: </strong> {props.profile.lookingForAJobDescription}\r\n            </div>\r\n            }\r\n            <div className={s.description}>\r\n                <strong> Contacts: </strong> {Object.keys(props.profile.contacts).map(key => {\r\n                return <div key={key}>\r\n                    <strong>{key}: </strong> {props.profile.contacts[key]}\r\n                </div>\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileData","import React from \"react\";\r\nimport s from \"./ProfileInfo.module.css\";\r\nimport {profileType} from \"../../../Redux/Types\";\r\nimport {Input, Textarea} from \"../../Common/FormControls/FormControls\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {requiredField} from \"../../../Utils/Validation/validators\";\r\n\r\ntype ProfileDataFormTypes = {\r\n    handleSubmit: any;\r\n    error: string;\r\n    profile: profileType;\r\n}\r\n\r\nconst ProfileDataForm = (props: ProfileDataFormTypes) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <button> Save changes</button>\r\n                {props.error && <div className={s.formSummaryError}>\r\n                    {props.error}\r\n                </div>\r\n                }\r\n            </div>\r\n            <div>\r\n                <p>Full name</p>\r\n                <Field type={\"text\"} name={\"fullName\"} component={Input} placeholder={\"Full name\"}\r\n                       validate={[requiredField]}/>\r\n            </div>\r\n            <div>\r\n                <p>Looking for a job</p>\r\n                <Field type={\"checkbox\"} name={\"lookingForAJob\"} component={Input}/>\r\n            </div>\r\n            <div>\r\n                <p>My professional skills</p>\r\n                <Field type={\"textarea\"} name={\"lookingForAJobDescription\"} component={Textarea}\r\n                       validate={[requiredField]}/>\r\n            </div>\r\n            <div>\r\n                <p>About me</p>\r\n                <Field type={\"textarea\"} name={\"aboutMe\"} component={Textarea}\r\n                       validate={[requiredField]}/>\r\n            </div>\r\n            <div>\r\n                <p>Contacts</p>\r\n                {Object.keys(props.profile.contacts).map(key => {\r\n                    return (\r\n                        <div>\r\n                            <strong> {key}: </strong> <Field type={\"text\"} name={\"contacts.\"+key} component={Input}/>\r\n                        </div>\r\n                        )\r\n                }) }\r\n            </div>\r\n\r\n        </form>\r\n    )\r\n}\r\n\r\nexport const ProfileDataReduxForm = reduxForm<any, any>({\r\n    form: 'profileData'\r\n})(ProfileDataForm)","import React, {ChangeEvent, useState} from 'react';\r\nimport s from './ProfileInfo.module.css';\r\nimport {profileType} from \"../../../Redux/Types\";\r\nimport avatarLogo from \"../../../Assets/Images/avatar.jpg\"\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWtihHooks\";\r\nimport ProfileData from \"./ProfileData\";\r\nimport {ProfileDataReduxForm} from \"./ProfileDataForm\";\r\n\r\n\r\ntype propsType = {\r\n    profile: profileType,\r\n    status: string,\r\n    update: (status: string) => void,\r\n    isOwner: boolean,\r\n    savePhoto: (e: File) => void,\r\n    updateProfileData: (profile: profileType) => Promise<any>,\r\n}\r\n\r\nconst ProfileInfo: React.FC<propsType> = ({profile, status, update, isOwner, savePhoto, updateProfileData}) => {\r\n\r\n    const photoUploadHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    const [editMode, setEditMode] = useState(false)\r\n\r\n    const onSubmit = (formData: profileType) => {\r\n        updateProfileData(formData).then(\r\n            () => setEditMode(false)\r\n        )\r\n    }\r\n\r\n    return (\r\n\r\n        <div>\r\n            {profile &&\r\n            <div>\r\n                <div className={s.description}>\r\n                    <img src={profile.photos.large || avatarLogo} alt=\"large avatar\"/>\r\n                    {isOwner && <input type={\"file\"} onChange={photoUploadHandler}/>}\r\n                </div>\r\n                {\r\n                    editMode\r\n                        ? <ProfileDataReduxForm initialValues={profile} onSubmit={onSubmit}\r\n                                                profile={profile}/>\r\n                        : <ProfileData isOwner={isOwner}\r\n                                       profile={profile}\r\n                                       activateEditMode={() => setEditMode(true)}/>\r\n                }\r\n                <ProfileStatusWithHooks profile={profile} status={status}\r\n                                        update={update} isOwner={isOwner}/>\r\n            </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileInfo","import {photosType, profilePageType, profileType} from \"./Types\";\r\nimport {profileApi, userApi} from \"../API/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst addPost = \"ADD-POST\";\r\nconst SET_USERS_PROFILE = \"SET_USERS_PROFILE\";\r\nconst SET_USER_STATUS = \"SET_USER_STATUS\";\r\nconst SET_USER_PHOTO = \"SET_USER_PHOTO\";\r\nconst SET_UPDATED_PROFILE_STATUS = \"SET_UPDATED_PROFILE_STATUS\";\r\nconst DELETE_POST = \"DELETE_POST\";\r\n\r\n\r\nlet initialState = {\r\n    profile: null,\r\n    status: \"\",\r\n    postsData: [\r\n        {id: 1, message: \"How are you?\", likesCount: 15},\r\n        {id: 2, message: \"It's my first post\", likesCount: 20},\r\n        {id: 3, message: \"I want to learn React\", likesCount: 35},\r\n        {id: 4, message: \"Lorem ipsum\", likesCount: 1},\r\n    ],\r\n}\r\n\r\nconst profileReducer = (state: profilePageType = initialState, action: any) => {\r\n\r\n    switch (action.type) {\r\n        case addPost:\r\n            let newPost = {id: 5, message: action.addNewPost, likesCount: 0}\r\n            return {\r\n                ...state,\r\n                postsData: [...state.postsData, newPost],\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.filter(p => p.id !== action.id),\r\n            }\r\n        case SET_USERS_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case SET_USER_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        case SET_USER_PHOTO:\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos}\r\n            }\r\n        case SET_UPDATED_PROFILE_STATUS:\r\n            return {\r\n                ...state,\r\n                profile: {\r\n                    ...state.profile,\r\n                    fullName: action.profile.fullName,\r\n                    lookingForAJobDescription: action.profile.lookingForAJobDescription,\r\n                    lookingForAJob: action.profile.lookingForAJob,\r\n                    aboutMe: action.profile.aboutMe,\r\n                    contacts: {\r\n                        ...action.profile.contacts\r\n                    }\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreator = (addNewPost: string) => {\r\n    return {type: addPost, addNewPost}\r\n}\r\nexport const deletePostActionCreator = (id: number) => {\r\n    return {type: DELETE_POST, id}\r\n}\r\nconst setUsersProfile = (profile: profileType) => ({type: SET_USERS_PROFILE, profile})\r\nconst setUserStatus = (status: string) => ({type: SET_USER_STATUS, status})\r\nconst setUserPhoto = (photos: photosType) => ({type: SET_USER_PHOTO, photos})\r\nconst setUpdatedProfileData = (profile: profileType) => ({type: SET_UPDATED_PROFILE_STATUS, profile})\r\n\r\nexport const getUserProfile = (userId: number) => {\r\n    return (dispatch: any) => {\r\n        userApi.getProfile(userId)\r\n            .then(response => {\r\n                dispatch(setUsersProfile(response.data))\r\n            })\r\n    }\r\n}\r\n\r\nexport const getUserStatus = (userId: number) => {\r\n    return (dispatch: any) => {\r\n        profileApi.getStatus(userId).then(response => {\r\n            dispatch(setUserStatus(response.data))\r\n        });\r\n    }\r\n}\r\n\r\nexport const updateUserStatus = (status: string) => {\r\n    return (dispatch: any) => {\r\n        profileApi.updateStatus(status).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(setUserStatus(status))\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file: File) => {\r\n    return (dispatch: any) => {\r\n        profileApi.savePhoto(file)\r\n            .then(response => {\r\n                if (response.data.resultCode === 0) {\r\n                    dispatch(setUserPhoto(response.data.data.photos))\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const updateProfileData = (profile: profileType) => async (dispatch: any) => {\r\n    const response = await profileApi.updateProfileData(profile)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setUpdatedProfileData(profile))\r\n    } else {\r\n        let key = response.data.messages[0].match(/Contacts->(\\w+)/)[1].toLowerCase();\r\n        dispatch(stopSubmit(\"profileData\", {contacts: {[key]: response.data.messages[0]}}))\r\n        return Promise.reject(response.data.messages[0])\r\n    }\r\n}\r\nexport default profileReducer;","import React from 'react';\r\nimport s from './Post.module.css';\r\n\r\ntype propsType = {\r\n    message: string,\r\n    likesCount: number\r\n};\r\n\r\nfunction Post (props: propsType) {\r\n    return (\r\n        <div className={s.item}>\r\n            <img src={\"https://greendestinations.org/wp-content/uploads/2019/05/avatar-exemple.jpg\"}/>\r\n            {props.message}\r\n            <div>\r\n                <span>{props.likesCount}  likes</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post","import React from 'react';\r\nimport {Field, reduxForm, SubmitHandler} from \"redux-form\";\r\nimport {maxLength, requiredField} from \"../../../Utils/Validation/validators\";\r\nimport {Textarea} from \"../../Common/FormControls/FormControls\";\r\n\r\ntype propsType = {\r\n    handleSubmit: SubmitHandler;\r\n}\r\nconst maxLength10 = maxLength(10);\r\n\r\nfunction AddPostForm(props: propsType) {\r\n\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n                <div>\r\n                    <Field component={Textarea} name={\"addNewPost\"}\r\n                           placeholder={\"Add your post here\"} validate={[requiredField, maxLength10]}/>\r\n                </div>\r\n                <div>\r\n                    <button>Add post</button>\r\n                </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport const AddPostReduxForm = reduxForm({\r\n    form: 'AddPost'\r\n})(AddPostForm)","import React from 'react';\r\nimport s from './MyPosts.module.css';\r\nimport Post from \"./Post/Post\";\r\nimport {AddPostReduxForm} from \"./AddPostForm\";\r\n\r\ntype propsType = {\r\n    posts: Array<{ id: number, message: string, likesCount: number }>,\r\n    addPost: (addNewPost: string) => void,\r\n}\r\n\r\n\r\n\r\nconst MyPosts = React.memo((props: propsType) => {\r\n    let postElements = props.posts.map((p,i) => <Post key={i} message ={p.message} likesCount = {p.likesCount} />)\r\n\r\n    const addPost = (addNewPost: string) => {\r\n        props.addPost(addNewPost);\r\n    }\r\n\r\n    const onSubmit = (values: any) => {\r\n        addPost(values.addNewPost)\r\n    }\r\n\r\n    return (\r\n        <div className={s.main}>\r\n            <h3> My posts </h3>\r\n            <AddPostReduxForm onSubmit={onSubmit}/>\r\n            <div className={s.posts}>  {postElements}  </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default MyPosts","import React from 'react';\r\nimport {addPostActionCreator} from \"../../../Redux/profileReducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {_stateType} from \"../../../Redux/Types\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToProps = (state: _stateType) => {\r\n    return {\r\n        posts: state.profilePage.postsData,\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        addPost: (addNewPost: string) => {\r\n            dispatch ( addPostActionCreator(addNewPost) )\r\n        }\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\r\n\r\nexport default MyPostsContainer","import React from 'react';\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\nimport {profileType} from \"../../Redux/Types\";\r\n\r\ntype propsType = {\r\n    profile: profileType,\r\n    status: string,\r\n    update: (status: string) => void,\r\n    isOwner: boolean,\r\n    savePhoto: (e: File) => void,\r\n    updateProfileData: (profile: profileType) => Promise<any>,\r\n}\r\n\r\nfunction Profile(props: propsType) {\r\n\r\n    return (\r\n        <div >\r\n            <ProfileInfo profile={props.profile} status={props.status} update={props.update}\r\n                         isOwner={props.isOwner} savePhoto={props.savePhoto} updateProfileData={props.updateProfileData}/>\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile","import React from 'react';\r\nimport s from './Profile.module.css';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {_stateType, profileType} from \"../../Redux/Types\";\r\nimport {\r\n    getUserProfile,\r\n    getUserStatus,\r\n    savePhoto,\r\n    updateProfileData,\r\n    updateUserStatus\r\n} from \"../../Redux/profileReducer\";\r\nimport {withRouter} from 'react-router-dom';\r\nimport {withAuthRedirect} from \"../../HOC/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\n\r\nclass ProfileContainer extends React.Component<any> {\r\n\r\n    goToProfile () {\r\n        let userId = this.props.match.params.userId;\r\n        if (!userId) {\r\n            userId = this.props.authorisedId\r\n            if(!userId) {\r\n                this.props.history.push(\"/login\")\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId)\r\n        this.props.getUserStatus(userId)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.goToProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<any>, prevState: Readonly<{}>) {\r\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\r\n            this.goToProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <div className={s.content}>\r\n            <Profile profile={this.props.profile} status={this.props.status}\r\n                     update={this.props.updateUserStatus} isOwner={!this.props.match.params.userId}\r\n                     savePhoto={this.props.savePhoto} updateProfileData={this.props.updateProfileData}/>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: _stateType) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authorisedId: state.auth.id,\r\n    isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default compose(\r\n    withAuthRedirect,\r\n    withRouter,\r\n    connect (mapStateToProps,\r\n        {getUserProfile, getUserStatus, updateUserStatus, savePhoto, updateProfileData}),\r\n)(ProfileContainer);\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport s from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype headerPropsType = {\r\n    isAuth: boolean\r\n    login: string\r\n    logout: () => void\r\n}\r\n\r\nfunction Header (props: headerPropsType) {\r\n    return (\r\n        <header className={s.header}>\r\n        <img src={\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQie3E0fOUC7Wzjg0m3zZMX44h4RqWOSJqM1cfgO0t2CeE2pmhc&usqp=CAU\"}/>\r\n\r\n        <div className={s.loginBlock}>\r\n            {props.isAuth\r\n                ? <div> { props.login } --- <button onClick={props.logout}> Log out </button> </div>\r\n                : <NavLink to={\"/login\"}>Login</NavLink>}\r\n\r\n        </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header","import {friendsPageType, friendsType} from \"./Types\";\r\nimport {userApi} from \"../API/api\";\r\n\r\nconst SET_FRIENDS = \"SET_FRIENDS\";\r\n\r\nlet initialState: friendsPageType = {\r\n    friends: [],\r\n}\r\n\r\nconst friendsReducer = (state = initialState, action: any) => {\r\n    switch (action.type) {\r\n        case \"SET_FRIENDS\":\r\n            return {\r\n                ...state,\r\n                friends: action.friends\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n// Action creators\r\nexport const setFriends = (friends: friendsType[]) => ({type: SET_FRIENDS, friends});\r\n\r\n// Thunk creators\r\nexport const getFriends = () => {\r\n    return (dispatch: any) => {\r\n        userApi.getFriends(true).then(data => {\r\n            dispatch(setFriends(data.items));\r\n        });\r\n    }\r\n}\r\n\r\nexport default friendsReducer;","import {authType} from \"./Types\";\r\nimport {loginApi, securityApi, userApi} from \"../API/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {getFriends, setFriends} from \"./friendsReducer\";\r\n\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\";\r\nconst CAPTCHA_URL_SUCCESS = \"CAPTCHA_URL_SUCCESS\";\r\n\r\nlet initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n}\r\n\r\nconst authReducer = (state: authType = initialState, action: any) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_USER_DATA:\r\n        case CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setUserData = (id: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n    ({type: SET_USER_DATA, payload: {id, email, login, isAuth}})\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string | null) =>\r\n    ({type: CAPTCHA_URL_SUCCESS, payload: {captchaUrl}})\r\n\r\nexport const checkAuth = () => {\r\n    return (dispatch: any) => {\r\n        return userApi.checkAuth()\r\n            .then(data => {\r\n                if (data.resultCode === 0) {\r\n                    let {id, login, email} = data.data\r\n                    dispatch(setUserData(id, email, login, true))\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string | number, rememberMe: boolean, captcha: string | null = null) => {\r\n    return (dispatch: any) => {\r\n        loginApi.signIn({email, password, rememberMe, captcha})\r\n            .then(data => {\r\n                if (data.data.resultCode === 0) {\r\n                    dispatch(checkAuth())\r\n                    dispatch(getFriends())\r\n                } else {\r\n                    if (data.data.resultCode === 10) {\r\n                        dispatch (getCaptcha())\r\n                    }\r\n                    let formErrorMessage = data.data.messages.length > 0 ? data.data.messages : \"Error occurred\";\r\n                    dispatch(stopSubmit(\"login\", {_error: `${formErrorMessage}`}))\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return (dispatch: any) => {\r\n        loginApi.signOut()\r\n            .then(data => {\r\n                if (data.data.resultCode === 0) {\r\n                    dispatch(setUserData(null, null, null, false,))\r\n                    dispatch(setFriends([]))\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getCaptcha = () => async (dispatch: any) => {\r\n    const response = await securityApi.getCaptchaUrl()\r\n    const captchaUrl = response.data.url\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport { logout } from \"../../Redux/authReducer\";\r\nimport {_stateType} from \"../../Redux/Types\";\r\n\r\nclass HeaderContainer extends React.Component<any, any> {\r\n\r\n    render() {\r\n        return <Header isAuth={this.props.isAuth} login={this.props.login} logout={this.props.logout}/>;\r\n    }\r\n}\r\n\r\nconst mapsStateToProps = (state: _stateType) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n    }\r\n}\r\n\r\nexport default connect(mapsStateToProps, {logout})(HeaderContainer)","import React from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {Input} from \"../Common/FormControls/FormControls\";\r\nimport {maxLength, requiredField} from \"../../Utils/Validation/validators\";\r\nimport s from \"../Common/FormControls/FormControls.module.css\"\r\n\r\ntype loginFormType = {\r\n    captchaUrl: string | null\r\n}\r\n\r\nconst maxLength10 = maxLength(10);\r\nconst maxLength50 = maxLength(50);\r\n\r\nlet LoginForm: React.FC<InjectedFormProps<any, loginFormType> & loginFormType> = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field type={\"text\"} name={\"email\"} component={Input} placeholder={\"email\"}\r\n                       validate={[requiredField, maxLength50]}/>\r\n            </div>\r\n            <div>\r\n                <Field type={\"password\"} name={\"password\"} component={Input} placeholder={\"password\"}\r\n                       validate={[requiredField, maxLength10]}/>\r\n            </div>\r\n            <div style={{display: \"inline-flex\"}}>\r\n                <Field type={\"checkbox\"} name={\"rememberMe\"} component={Input}/> <span>remember me</span>\r\n            </div>\r\n            {\r\n                captchaUrl &&\r\n                <div> <img src={captchaUrl} alt=\"Captcha\"/> </div>\r\n            }\r\n            {\r\n                captchaUrl &&\r\n                <div>\r\n                    <Field type={\"text\"} name={\"captcha\"} component={Input}\r\n                           placeholder={\"Type antibot symbols\"}\r\n                           validate={[requiredField]}/>\r\n                </div>\r\n            }\r\n            {\r\n                error &&\r\n            <div className={s.formSummaryError}>\r\n                {error}\r\n            </div>\r\n            }\r\n            <div>\r\n                <button>Sign in</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport const LoginReduxForm = reduxForm<any, any>({\r\n    // a unique name for the form\r\n    form: 'login'\r\n})(LoginForm)","import React from \"react\";\r\nimport {LoginReduxForm} from \"./LoginForm\";\r\nimport {connect} from \"react-redux\";\r\nimport {getCaptcha, login, logout} from \"../../Redux/authReducer\";\r\nimport {_stateType} from \"../../Redux/Types\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\ntype loginType = {\r\n    login: (email: string, password: string|number, rememberMe: boolean, captcha: string) => void,\r\n    isAuth: boolean,\r\n    captchaUrl: string,\r\n}\r\n\r\nconst Login = (props: loginType) => {\r\n    const onSubmit = (formData: { email: string, password: string|number, rememberMe: boolean, captcha: string}) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={\"/profile\"}/>\r\n    }\r\n    return (\r\n        <div>\r\n            <h1>LOGIN</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state: _stateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captchaUrl: state.auth.captchaUrl,\r\n})\r\n\r\n// @ts-ignore\r\nexport default connect(mapStateToProps, {login, logout, getCaptcha})(Login)","import {checkAuth} from \"./authReducer\";\r\nimport {appType} from \"./Types\";\r\n\r\n\r\nconst INITIALISED_SUCCESFULLY = \"INITIALISED_SUCCESFULLY\";\r\n\r\nlet initialState = {\r\n    initialised: false\r\n}\r\n\r\nconst appReducer = (state: appType = initialState, action: any) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case INITIALISED_SUCCESFULLY:\r\n            return {\r\n                ...state,\r\n                initialised: true,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const initialisedSuccessfully = () => ({type: INITIALISED_SUCCESFULLY})\r\n\r\nexport const initialiseApp = () => (dispatch: any) => {\r\n    let checkAuthResult = dispatch(checkAuth())\r\n    Promise.all([checkAuthResult])\r\n        .then(() => {\r\n            dispatch(initialisedSuccessfully())\r\n        })\r\n}\r\n\r\nexport default appReducer;","import React from 'react';\r\nimport s from './Friends.module.css';\r\nimport {friendsType} from \"../../Redux/Types\";\r\nimport avatarLogo from \"../../Assets/Images/avatar.jpg\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype propsType = {\r\n    friends: friendsType[],\r\n}\r\n\r\nfunction Friends(props: propsType) {\r\n\r\n    let friendsElements = props.friends.map((f, index) =>\r\n        <div className={s.friend} key={index}>\r\n            <NavLink to={\"/profile/\" + f.id}>\r\n                <img src={f.photos.small ? f.photos.small : avatarLogo} alt={\"\"}/>\r\n            </NavLink>\r\n            <div className={s.friendName}>\r\n                {f.name}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n\r\n            <h2>Friends</h2>\r\n\r\n            <div className={s.friends}>\r\n                {friendsElements}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friends","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {_stateType} from \"../../Redux/Types\";\r\nimport Friends from \"./Friends\";\r\nimport {getFriends} from \"../../Redux/friendsReducer\";\r\n\r\n\r\nclass FriendsContainer extends React.Component<any> {\r\n\r\n    componentDidMount() {\r\n        this.props.getFriends()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Friends friends={this.props.friends}/>\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: _stateType) => {\r\n    return {\r\n        friends: state.friendsPage.friends,\r\n    }\r\n}\r\n\r\nexport default connect (mapStateToProps, {getFriends})(React.memo(FriendsContainer))\r\n","import React from 'react';\nimport {Route} from \"react-router-dom\";\nimport './App.css';\nimport Navbar from \"./Components/Navbar/Navbar\";\nimport Music from \"./Components/Music/Music\";\nimport News from \"./Components/News/News\";\nimport Settings from \"./Components/Settings/Settings\";\nimport {_stateType} from './Redux/Types';\nimport UsersContainer from \"./Components/Users/UsersContainer\";\nimport ProfileContainer from \"./Components/Profile/ProfileContainer\";\nimport HeaderContainer from \"./Components/Header/HeaderContainer\";\nimport Login from \"./Components/Login/Login\";\nimport {connect} from \"react-redux\";\nimport {initialiseApp} from \"./Redux/appReducer\";\nimport Preloader from \"./Components/Common/Preloader/Preloader\";\nimport FriendsContainer from \"./Components/Friends/FriendsContainer\";\nconst DialogsContainer = React.lazy(() => import(\"./Components/Dialogs/DialogsContainer\"))\n\n\nclass App extends React.Component<any, any> {\n    componentDidMount() {\n        this.props.initialiseApp()\n    }\n\n    render() {\n        if (!this.props.initialised) {\n            return <Preloader/>\n        }\n        return (\n\n            <div className={\"app-wrapper\"}>\n                <HeaderContainer/>\n                <Navbar/>\n                <div className={\"app-wrapper-content\"}>\n                    <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\n                    <Route path='/dialogs' render={() => {\n                        return <React.Suspense fallback={<Preloader/>}>\n                                     <DialogsContainer/>\n                               </React.Suspense>\n                    }}/>\n                    <Route path='/news' render={() => <Music/>}/>\n                    <Route path='/music' render={() => <News/>}/>\n                    <Route path='/settings' render={() => <Settings/>}/>\n                    <Route path='/users' render={() => <UsersContainer/>}/>\n                    <Route path='/login' render={() => <Login/>}/>\n                </div>\n                <div style={{gridArea: \"r\", backgroundColor: \"black\"}}>\n                    <FriendsContainer/>\n                </div>\n            </div>\n\n        );\n    }\n}\n\nconst mapStateToProps = (state: _stateType) => ({\n    initialised: state.app.initialised\n})\n\nexport default connect(mapStateToProps, {initialiseApp})(App);","import {applyMiddleware, combineReducers, createStore, Store} from \"redux\";\r\nimport profileReducer from \"./profileReducer\";\r\nimport messageReducer from \"./messageReducer\";\r\nimport friendsReducer from \"./friendsReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\nimport authReducer from \"./authReducer\";\r\nimport thunkMiddleware from \"redux-thunk\"\r\nimport { reducer as formReducer } from \"redux-form\"\r\nimport appReducer from \"./appReducer\";\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    messagesPage: messageReducer,\r\n    usersPage: usersReducer,\r\n    friendsPage: friendsReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    form: formReducer,\r\n})\r\n\r\nexport type AppStateType = ReturnType<typeof reducers>\r\n\r\nlet store: Store = createStore(reducers, applyMiddleware(thunkMiddleware))\r\n\r\nexport default store","import * as serviceWorker from './serviceWorker';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from \"./Redux/reduxStore\";\nimport {Provider} from 'react-redux';\nimport {HashRouter} from \"react-router-dom\";\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <HashRouter>\n            <App/>\n        </HashRouter>\n    </Provider>, document.getElementById('root'));\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControls_formControl__ZYcM1\",\"error\":\"FormControls_error__3I2i7\",\"formSummaryError\":\"FormControls_formSummaryError__2CIQE\"};","module.exports = __webpack_public_path__ + \"static/media/avatar.64830c49.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPhoto\":\"Users_usersPhoto__2cLG_\",\"userContainer\":\"Users_userContainer__PLg5V\",\"imageAndButtonContainer\":\"Users_imageAndButtonContainer__3Yr9E\",\"button\":\"Users_button__2GMTj\",\"userInformation\":\"Users_userInformation__3W_DY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friends\":\"Friends_friends__22q5d\",\"friend\":\"Friends_friend__2--Sd\",\"friendName\":\"Friends_friendName__3AgSy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__3QJY_\",\"pagination\":\"Paginator_pagination__1WvrG\"};"],"sourceRoot":""}